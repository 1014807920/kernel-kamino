#include <linux/module.h>
#include <linux/moduleparam.h>
#include <linux/kernel.h>
#include <linux/init.h>
#include <linux/delay.h>
#include <linux/pm.h>
#include <linux/i2c.h>
#include <linux/slab.h>
#include <sound/core.h>
#include <sound/pcm.h>
#include <sound/pcm_params.h>
#include <sound/soc.h>
#include <sound/initval.h>
#include <sound/tlv.h>
#include <asm/div64.h>
#include <linux/types.h>
#include <linux/string.h>
#include <linux/spinlock.h>

#include <linux/gpio.h>
#include <linux/of.h>
#include <linux/pinctrl/consumer.h>
#include <linux/of_gpio.h>
#include <linux/io.h>
#include <linux/of_irq.h>

#include "npcp215x.h"

static unsigned char MaxxAudio_Cmd_FULL_Init[] = {
	0x00, 0xA5, 0x00,  // Setup Start (start initialization state)
 	0x00, 0xC3, 0x00,  // Set Sample Rate : 48KHz
	0x00, 0xA4, 0x11,  // Load Mixer Gains - Start
 	0x0F, 0xBF, 0x58,  // M1 - SDI0 to Processing path (-0.20 dB)
 	0x00, 0x00, 0x00,  // M2 - SDI1 to Processing path (-inf)
 	0x00, 0x00, 0x00,  // M3 - SDI2 to Processing path (-inf)
 	0x00, 0x00, 0x00,  // M4 - SDI3 to Processing path (ADC) (-inf)
 	0x00, 0x00, 0x00,  // M5 - SDI0 to UnProcessing path (-inf)
 	0x00, 0x00, 0x00,  // M6 - SDI1 to UnProcessing path (-inf)
 	0x00, 0x00, 0x00,  // M7 - SDI2 to UnProcessing path (-inf)
 	0x00, 0x01, 0x4A,  // M8 - SDI3 to UnProcessing path (ADC) (-70.10 dB)
 	0x72, 0x9B, 0x4F,  // M9 - SDO0 from Processed path (-0.96 dB)
 	0x00, 0x00, 0x00,  // M10- SDO1 from Processed path (-inf)
 	0x60, 0x35, 0x2D,  // M11- SDO3 from Processed path (DAC1/AMP) (-2.48 dB)
 	0x00, 0x00, 0x00,  // M12- SDO0 from UnProcessed path (-inf)
 	0x00, 0x00, 0x00,  // M13- SDO1 from UnProcessed path (-inf)
 	0x00, 0x00, 0x00,  // M14- SDO3 from UnProcessed path (DAC1/AMP) (-inf)
 	0x00, 0x00, 0x00,  // M15- SDO2 from Subwoofer path (DAC2/AMP) (-inf)
 	0x00, 0x00, 0x00,  // M16- SDO2 from UnProcessed path (DAC2) (-inf)
 	0x7F, 0xFF, 0xFF,  // M17- SDO2 from Processed path (DAC2) (0.00 dB)
	0x00, 0xC8, 0x00,  // Load Mixer Gains - End
 	0xBF, 0xC4, 0xC5,  // Set SSI:  Slave mode, I2S, 24bit, 64 x DCLK,
 	// NOTE: Verify min 250usec delay between PLL and Clocks configuration commands.
	0xFF, 0xAB, 0xFB,  // Set Clock Control Settings
	0x24, 0x20, 0x09,  // ==>  REF=DCLK,  CLKOUT=REF/10,  DSP=REF/1,  CLK256=REF/10,
	0xFF, 0xAB, 0xFA,  // Set PLL Settings
	0x08, 0x00, 0x27,  // ==>  PLL is RESET.
	0xFF, 0xAB, 0xFA,  // Set PLL Settings
	0x00, 0x00, 0x27,  // ==>  PLL = (REF * 40) / (1 * 1).
	0xFF, 0xAB, 0xFB,  // Set Clock Control Settings
 	0xA4, 0x28, 0x29,  // ==>  REF=DCLK,  CLKOUT=PLL/10,  DSP=PLL/1,  CLK256=PLL/10,
 	0x00, 0xF4, 0x00,  // Sub EQ - Bypass, No Reset
 	0x03, 0xA8, 0xE0,  // Generic Write (Y)
 	0x00, 0x00, 0x01,
 	0x03, 0xA8, 0xE1,  // Generic Write (Y)
 	0x00, 0x00, 0x01,
 	0x03, 0xA8, 0xE2,  // Generic Write (Y)
 	0x00, 0x00, 0x00,
 	0x03, 0xA8, 0xE3,  // Generic Write (Y)
 	0x40, 0x00, 0x00,
 	0x03, 0xA8, 0xE4,  // Generic Write (Y)
 	0x00, 0x00, 0x00,
 	0x03, 0xA8, 0xE5,  // Generic Write (Y)
 	0x00, 0x00, 0x00,
 	0x03, 0xA8, 0xE6,  // Generic Write (Y)
 	0x00, 0x00, 0x00,
 	0x01, 0xF4, 0x01,  // Sub EQ - Active, Reset
 	0x00, 0xF4, 0x00,  // Sub EQ - Bypass, No Reset
 	0x03, 0xA8, 0xE0,  // Generic Write (Y)
 	0x00, 0x00, 0x01,
 	0x03, 0xA8, 0xE1,  // Generic Write (Y)
 	0x00, 0x00, 0x01,
 	0x03, 0xA8, 0xE7,  // Generic Write (Y)
 	0x00, 0x00, 0x00,
 	0x03, 0xA8, 0xE8,  // Generic Write (Y)
 	0x40, 0x00, 0x00,
 	0x03, 0xA8, 0xE9,  // Generic Write (Y)
 	0x00, 0x00, 0x00,
 	0x03, 0xA8, 0xEA,  // Generic Write (Y)
 	0x00, 0x00, 0x00,
 	0x03, 0xA8, 0xEB,  // Generic Write (Y)
 	0x00, 0x00, 0x00,
 	0x01, 0xF4, 0x01,  // Sub EQ - Active, Reset
 	0x00, 0xAE, 0x00,  // Enable Firmware Watchdog
 	//# Audio PWM and Power Amplifier Initialization.
 	//# Verify 12msec delay before switch to 1sec fault latch time.
 	0xFF, 0xAD, 0xA0,  // Set Audio PWM control
 	0x00, 0x00, 0x00,
 	0xFF, 0xAD, 0xA0,  // Set Audio PWM control
 	0x00, 0x00, 0x01,
 	0xFF, 0xAD, 0xA1,  // Set Audio PWM Index
 	0x00, 0x08, 0x00,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0xFF, 0xFE, 0xBA,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0xFF, 0xF8, 0xEA,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0xFF, 0xEC, 0x02,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0xFF, 0xDE, 0xF4,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0xFF, 0xEA, 0xE0,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0x00, 0x33, 0x4F,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0x00, 0xC0, 0xC6,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0x01, 0x4C, 0x02,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0x01, 0x2E, 0xA7,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0xFF, 0xB5, 0x3F,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0xFC, 0xD3, 0xA3,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0xF9, 0xD3, 0xED,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0xF9, 0x56, 0x46,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0xFE, 0x37, 0xF8,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0x09, 0xB9, 0xB4,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0x1A, 0x01, 0x50,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0x2A, 0x2B, 0x45,
 	0xFF, 0xAD, 0xA2,  // Set Audio PWM Data Access
 	0x34, 0x46, 0x7A,
 	0xFF, 0xAD, 0xAA,  // Set Audio PWM Control Register 2
 	0x00, 0x02, 0x00,
 	0xFF, 0xAD, 0xA7,  // Set Audio PWM and Power Control Register
 	0x04, 0x44, 0x33,
 	0xFF, 0xAD, 0xA0,  // Set Audio PWM control
 	0x00, 0x1C, 0x13,
 	0xFF, 0xAB, 0xF3,  // Set GPIO Selection 2
 	0x00, 0x01, 0xC8,  // ==>  [GPIO16/nMUTE] -> nMUTE,  [GPO17/EVENT] -> EVENT,  [[CLKOUT/ROOUT]/GPO07] -> GPO07,  Power AMP: ON,  Fault latch time 4ms,  Crystal: ON,  [SDO2/GPO18] -> SDO2,
 	0xFF, 0xAD, 0x94,  // Set Event Enable Register
 	0x00, 0x00, 0x02,
 	0xFF, 0xAD, 0x93,  // Set Event Status Register
 	0xFF, 0xFF, 0xFF,
 	//# I/O Configuration
 	0xFF, 0xAB, 0xF2,  // Set GPIO Pull-Up
 	0xFF, 0xFF, 0xFF,
 	0xFF, 0xAB, 0xDB,  // Set GPIO Output Enable
 	0x00, 0x00, 0x00,
 	0xFF, 0xAB, 0xDC,  // Set GPIO Output Value
 	0x00, 0x00, 0x00,
 	0xFF, 0xAB, 0xF3,  // Set GPIO Selection 2
 	0x00, 0x09, 0xC8,  // ==>  [GPIO16/nMUTE] -> nMUTE,  [GPO17/EVENT] -> EVENT,  [[CLKOUT/ROOUT]/GPO07] -> GPO07,  Power AMP: ON,  Fault latch time 1s,  Crystal: ON,  [SDO2/GPO18] -> SDO2,
 	0xFF, 0xAB, 0xDA,  // Set GPIO Selection 1
 	0x00, 0x3F, 0x7F,  // ==>  SDO3,  SDO2,  GPO07,  SDO0,  SDI3,  SDI2,  SDI1,  SDI0,  SYNC,  DCLK,
 	//#  Start Algorithm Configuration
	0x00, 0xF4, 0x00,  // Sub EQ - Bypass, No Reset
 	0x01, 0xF4, 0x01,  // Sub EQ - Active, Reset
 	0x00, 0xF4, 0x00,  // Sub EQ - Bypass, No Reset
 	0x01, 0xF4, 0x01,  // Sub EQ - Active, Reset
 	0x00, 0xC2, 0x00,  // Set Speaker Type (Also disable Bypass) : 2.0 Mode
 	0x00, 0xC9, 0x78,  // Set Balance  L-CH: 0dB,  R-CH: 0dB.
 	0x00, 0xDF, 0x00,  // Set Leveler Target : 0.00 dB
 	0x00, 0xDB, 0x3C,  // Set Leveler Range : -12.00 dB
 	0x00, 0xDB, 0x3C,  // Set Leveler Range : -12.00 dB
 	0x00, 0xC7, 0x00,  // Set Soft Mute : Un-Mute (NOTE: Add soft-mute fade time delay)
 	0x00, 0xE0, 0x0A,  // Set Soft-Mute Fade Time : 10 msec
 	0x00, 0xD5, 0x67,  // Set MaxxBass Cutoff Freq : 97.2 Hz
 	0x00, 0xE3, 0x64,  // Set Front High-Pass Freq : 89.8 Hz
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xE1, 0x70,  // Set MaxxBass Noise Gate Threshold : -100 dB
 	0x00, 0xCB, 0x00,  // Set Original Bass : Disable adding original bass
 	0x00, 0xE2, 0x2F,  // Set MaxxBass Noise Gate Gap : -47 dB
 	0x00, 0xD9, 0x5C,  // Set MaxxTreble Freq : 7242.4 Hz
 	0x00, 0xE5, 0x2F,  // Set MaxxTreble Noise Gate Gap : -47 dB
 	0x00, 0xE4, 0x70,  // Set MaxxTreble Noise Gate Threshold : -100 dB
	0x01, 0xD0, 0xBA,  // Set MaxxVolume Gain : 8.40 dB
 	0x00, 0xC6, 0x01,  // Set Leveler : OFF
 	0x00, 0xDD, 0x01,  // Set MaxxVolume Type : Hard-Knee
 	0x00, 0xD4, 0x15,  // Set MaxxVolume Dynamic Range : -70 dB
 	0x00, 0xDA, 0x06,  // Set MaxxVolume Low Gain : 3.00 dB
 	0x00, 0xDC, 0x00,  // Set MaxxVolume Noise Gate : -96 dB
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x00,  // Ch: 1
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x23,  // Freq: 121 Hz
 	0x00, 0x00, 0x33,  // Q: 2.65
 	0x00, 0x00, 0x47,  // Gain: 2.0
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x01,  // Ch: 2
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x2B,  // Freq: 192 Hz
 	0x00, 0x00, 0x30,  // Q: 2.52
 	0x00, 0x00, 0x3B,  // Gain: -1.4
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x02,  // Ch: 3
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x30,  // Freq: 256 Hz
 	0x00, 0x00, 0x1E,  // Q: 1.72
 	0x00, 0x00, 0x31,  // Gain: -4.2
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x03,  // Ch: 4
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x37,  // Freq: 384 Hz
 	0x00, 0x00, 0x20,  // Q: 1.81
 	0x00, 0x00, 0x51,  // Gain: 4.8
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x04,  // Ch: 5
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x3C,  // Freq: 512 Hz
 	0x00, 0x00, 0x25,  // Q: 2.03
 	0x00, 0x00, 0x48,  // Gain: 2.2
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x05,  // Ch: 6
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x58,  // Freq: 2580 Hz
 	0x00, 0x00, 0x3A,  // Q: 2.96
 	0x00, 0x00, 0x39,  // Gain: -2.0
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x06,  // Ch: 7
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x5D,  // Freq: 3444 Hz
 	0x00, 0x00, 0x5E,  // Q: 4.54
 	0x00, 0x00, 0x3B,  // Gain: -1.4
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x07,  // Ch: 8
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x64,  // Freq: 5161 Hz
 	0x00, 0x00, 0x7F,  // Q: 6.00
 	0x00, 0x00, 0x3D,  // Gain: -0.9
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x08,  // Ch: 9
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x6E,  // Freq: 9195 Hz
 	0x00, 0x00, 0x3A,  // Q: 2.96
 	0x00, 0x00, 0x39,  // Gain: -2.0
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x09,  // Ch: 10
 	0x00, 0x00, 0x02,  // Type: High Shelf
 	0x00, 0x00, 0x74,  // Freq: 13004 Hz
 	0x00, 0x00, 0x16,  // Q: 1.37
 	0x00, 0x00, 0x52,  // Gain: 5.1
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xCF, 0x01,  // Set Bypass Algorithm. Bypass is enabled for : High Pass Filter,
 	0x00, 0xD1, 0x00,  // Set MaxxBass Intensity : 0.0 %
 	0x00, 0xD1, 0x09,  // Set MaxxBass Intensity : 11.8 %
 	0x00, 0xD1, 0x12,  // Set MaxxBass Intensity : 23.7 %
 	0x00, 0xD1, 0x1B,  // Set MaxxBass Intensity : 35.5 %
 	0x00, 0xD1, 0x24,  // Set MaxxBass Intensity : 47.4 %
 	0x00, 0xD1, 0x2D,  // Set MaxxBass Intensity : 59.2 %
 	0x00, 0xD1, 0x36,  // Set MaxxBass Intensity : 71.1 %
 	0x00, 0xD1, 0x3F,  // Set MaxxBass Intensity : 82.9 %
 	0x00, 0xD1, 0x48,  // Set MaxxBass Intensity : 94.7 %
 	0x00, 0xD1, 0x4C,  // Set MaxxBass Intensity : 100.0 %
 	0x00, 0xD1, 0x10,  // Set MaxxBass Intensity : 21.1 %
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xD2, 0x0B,  // Set MaxxTreble Intensity : 8.7 %
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xD3, 0x19,  // Set Maxx3D Intensity : 32.9 %
 	0x00, 0xD6, 0x19,  // Set Maxx3D Mode : SF 44.1KHz/48KHz, Speaker Span Wide, Low-Pass 3 dB
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xE8, 0x4C,  // Set MaxxDialog Level : 59.8 %
 	0x00, 0xE9, 0x4C,  // Set MaxxDialog Side Level : 59.8 %
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x07, 0xAA, 0x04,  // Set Patch Version
 	0x03, 0xA2, 0x5E,  // Load Patch (extend data 862 x 3)
  	0x61, 0xF4, 0x00,
 	0x00, 0x00, 0x89,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x5A,
 	0x61, 0xF4, 0x00,
 	0x00, 0x00, 0x9C,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x49,
 	0x61, 0xF4, 0x00,
 	0x00, 0x01, 0x72,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x60, 0xF4, 0x00,
 	0x00, 0x00, 0x0E,
 	0x45, 0xF4, 0x00,
 	0x0B, 0xF0, 0x80,
 	0x44, 0xF4, 0x00,
 	0x00, 0x01, 0x27,
 	0x07, 0x58, 0x85,
 	0x07, 0x58, 0x84,
 	0x0B, 0xF0, 0x80,
 	0x00, 0x00, 0xD6,
 	0x38, 0x00, 0x00,
 	0x08, 0xD8, 0x34,
 	0x44, 0xF4, 0x00,
 	0x30, 0x0F, 0x58,
 	0x08, 0xC4, 0x35,
 	0x44, 0xF4, 0x00,
 	0x0A, 0xF0, 0x80,
 	0x08, 0xC4, 0x36,
 	0x44, 0xF4, 0x00,
 	0x00, 0x00, 0xDE,
 	0x08, 0xC4, 0x37,
 	0x0B, 0xF0, 0x80,
 	0x00, 0x00, 0xF6,
 	0x46, 0xF4, 0x00,
 	0x7F, 0xFF, 0xFF,
 	0x4E, 0x70, 0x00,
 	0x00, 0x03, 0xB5,
 	0x64, 0xF4, 0x00,
 	0x00, 0x03, 0xB7,
 	0x60, 0xF4, 0x00,
 	0x00, 0x03, 0x07,
 	0x46, 0xF4, 0x00,
 	0x00, 0x00, 0x11,
 	0x4E, 0x64, 0x00,
 	0x46, 0x60, 0x00,
 	0x0A, 0xC4, 0x40,
 	0x0B, 0xF0, 0x80,
 	0x00, 0x03, 0x52,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x72,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0xFA,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x97,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x48,
 	0x00, 0x00, 0x00,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0x09,
 	0x0B, 0xE1, 0x80,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0x49,
 	0x0B, 0xE1, 0x80,
 	0x44, 0xF0, 0x00,
 	0x00, 0x00, 0x47,
 	0x0A, 0xC4, 0x02,
 	0x00, 0x00, 0x88,
 	0x0A, 0xC4, 0x63,
 	0x44, 0x70, 0x00,
 	0x00, 0x00, 0x47,
 	0x00, 0x00, 0x0C,
 	0x0A, 0xC4, 0x26,
 	0x00, 0xD4, 0x8F,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0x6B,
 	0x0B, 0xE1, 0x80,
 	0x57, 0xF0, 0x00,
 	0x00, 0x01, 0xA8,
 	0x44, 0xF0, 0x00,
 	0x00, 0x01, 0xA2,
 	0x1F, 0xB0, 0x41,
 	0x00, 0x01, 0xA0,
 	0x20, 0x00, 0x07,
 	0x02, 0x90, 0x00,
 	0x20, 0x00, 0x79,
 	0x20, 0x00, 0x07,
 	0x02, 0x90, 0x00,
 	0x20, 0x00, 0x79,
 	0x0A, 0xF0, 0x80,
 	0x00, 0xD4, 0x0B,
 	0x05, 0xF4, 0x23,
 	0xFF, 0xFF, 0xFF,
 	0x20, 0x00, 0x1B,
 	0x57, 0xF0, 0x13,
 	0x00, 0x02, 0xD8,
 	0x56, 0xBD, 0x00,
 	0x01, 0x41, 0x85,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x00, 0xA7,
 	0x57, 0xF0, 0x00,
 	0x00, 0x02, 0xDA,
 	0x46, 0xF4, 0x00,
 	0x00, 0x00, 0x01,
 	0x20, 0x00, 0x58,
 	0x21, 0xE5, 0x3A,
 	0x20, 0x00, 0x68,
 	0x47, 0xF4, 0x00,
 	0x00, 0x16, 0x00,
 	0x46, 0xF0, 0x78,
 	0x00, 0x00, 0x49,
 	0x20, 0x00, 0x58,
 	0x21, 0xF3, 0x00,
 	0x6C, 0xF0, 0x00,
 	0x00, 0x02, 0x54,
 	0x74, 0xF4, 0x00,
 	0x00, 0x00, 0x03,
 	0x20, 0x4C, 0x00,
 	0x4E, 0xDB, 0x13,
 	0x20, 0xCE, 0x00,
 	0x4E, 0x5C, 0x00,
 	0x4E, 0xDB, 0x00,
 	0x4E, 0x5C, 0x00,
 	0x4E, 0xDB, 0x00,
 	0x4E, 0x64, 0x00,
 	0x44, 0xF0, 0x00,
 	0x00, 0x02, 0xC6,
 	0x63, 0xF4, 0x00,
 	0x00, 0x1A, 0xE8,
 	0x46, 0xF4, 0x00,
 	0x00, 0x00, 0x18,
 	0x20, 0x54, 0xD8,
 	0x20, 0x54, 0x2A,
 	0x21, 0x3B, 0x00,
 	0x20, 0x4B, 0x00,
 	0x73, 0xF4, 0x00,
 	0x00, 0x00, 0x12,
 	0x20, 0x4B, 0x00,
 	0x46, 0xDB, 0x1B,
 	0x20, 0xCF, 0x00,
 	0x20, 0x00, 0x0D,
 	0x0D, 0x10, 0x49,
 	0x00, 0x00, 0x07,
 	0x4E, 0x5C, 0x00,
 	0x46, 0xDB, 0x00,
 	0x4E, 0x5C, 0x00,
 	0x46, 0xDB, 0x00,
 	0x4E, 0x64, 0x00,
 	0x00, 0x00, 0x0C,
 	0x20, 0x00, 0x13,
 	0x60, 0xF4, 0x00,
 	0x00, 0x02, 0xFD,
 	0x56, 0x60, 0x00,
 	0x06, 0x08, 0x80,
 	0x00, 0x00, 0xDC,
 	0x56, 0x58, 0x00,
 	0x00, 0x00, 0x0C,
 	0x30, 0xFF, 0x00,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0x78,
 	0x64, 0xF4, 0x00,
 	0x00, 0x02, 0x56,
 	0x0B, 0xE1, 0x80,
 	0x60, 0xF4, 0x00,
 	0x00, 0x02, 0xFD,
 	0x44, 0xD8, 0x00,
 	0x0A, 0xC4, 0x00,
 	0x00, 0x00, 0xF4,
 	0x64, 0xF4, 0x00,
 	0x00, 0x03, 0xE0,
 	0x7D, 0xDC, 0x00,
 	0x79, 0xDC, 0x00,
 	0x38, 0x02, 0x00,
 	0x57, 0xF0, 0x00,
 	0x00, 0x01, 0xA8,
 	0x0B, 0xF0, 0x80,
 	0x00, 0xD5, 0x96,
 	0x57, 0x70, 0x00,
 	0x00, 0x01, 0xA8,
 	0x0A, 0xF0, 0x80,
 	0x00, 0xCF, 0x5E,
 	0x44, 0xF0, 0x00,
 	0x00, 0x02, 0xD4,
 	0x44, 0x70, 0x00,
 	0x00, 0x03, 0xFA,
 	0x44, 0xF4, 0x00,
 	0x00, 0x00, 0x00,
 	0x44, 0x70, 0x00,
 	0x00, 0x03, 0xFB,
 	0x44, 0xF4, 0x00,
 	0x00, 0x01, 0xD6,
 	0x44, 0x70, 0x00,
 	0x00, 0x03, 0xFC,
 	0x44, 0xF4, 0x00,
 	0x00, 0x00, 0x01,
 	0x44, 0x70, 0x00,
 	0x00, 0x03, 0xFD,
 	0x00, 0x00, 0x0C,
 	0x44, 0xF0, 0x00,
 	0x00, 0x02, 0xD4,
 	0x0A, 0xC5, 0x00,
 	0x00, 0x01, 0x24,
 	0x44, 0xF0, 0x00,
 	0x00, 0x00, 0x47,
 	0x0A, 0xC4, 0x26,
 	0x00, 0x01, 0x24,
 	0x44, 0xF0, 0x00,
 	0x00, 0x03, 0xFD,
 	0x01, 0x41, 0xC8,
 	0x00, 0x00, 0x4E,
 	0x20, 0x00, 0x2A,
 	0x21, 0x26, 0x00,
 	0x44, 0xF0, 0x00,
 	0x00, 0x02, 0xD3,
 	0x20, 0x00, 0xD8,
 	0x44, 0xF0, 0x00,
 	0x00, 0x03, 0xFC,
 	0x20, 0x00, 0xDE,
 	0x2E, 0x00, 0x00,
 	0x20, 0x00, 0x1D,
 	0x0C, 0x1C, 0x95,
 	0x50, 0xF0, 0x00,
 	0x00, 0x02, 0xD4,
 	0x20, 0x00, 0x14,
 	0x2F, 0x00, 0x00,
 	0x20, 0x00, 0x1D,
 	0x21, 0x24, 0x00,
 	0x44, 0x70, 0x00,
 	0x00, 0x03, 0xFA,
 	0x00, 0x00, 0x0C,
 	0x0B, 0xF0, 0x80,
 	0x00, 0xC2, 0x83,
 	0x0A, 0x15, 0x20,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0xA0,
 	0x60, 0xF4, 0x00,
 	0x00, 0x01, 0x93,
 	0x64, 0xF4, 0x00,
 	0x00, 0x02, 0x8A,
 	0x0B, 0xE1, 0x80,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0xA0,
 	0x60, 0xF4, 0x00,
 	0x00, 0x01, 0x97,
 	0x64, 0xF4, 0x00,
 	0x00, 0x02, 0x8D,
 	0x0B, 0xE1, 0x80,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0xA0,
 	0x60, 0xF4, 0x00,
 	0x00, 0x03, 0x06,
 	0x64, 0xF4, 0x00,
 	0x00, 0x03, 0xB6,
 	0x0B, 0xE1, 0x80,
 	0x07, 0x70, 0x35,
 	0x00, 0x01, 0x9E,
 	0x07, 0x70, 0x36,
 	0x00, 0x01, 0x9F,
 	0x6C, 0xF0, 0x00,
 	0x00, 0x02, 0x54,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0xA3,
 	0x74, 0xF4, 0x00,
 	0x00, 0x00, 0x9E,
 	0x20, 0x4C, 0x00,
 	0x60, 0xF4, 0x00,
 	0x00, 0x01, 0x9D,
 	0x0B, 0xE1, 0x80,
 	0x61, 0xF0, 0x00,
 	0x00, 0x01, 0xFC,
 	0x0B, 0xF0, 0x80,
 	0x00, 0xCA, 0x03,
 	0x0B, 0x14, 0xAD,
 	0x00, 0x03, 0x8D,
 	0x0B, 0xE1, 0x80,
 	0x4E, 0xF0, 0x00,
 	0x00, 0x03, 0xB5,
 	0x44, 0xF0, 0x00,
 	0x00, 0x01, 0xBD,
 	0x45, 0xF0, 0xD1,
 	0x00, 0x01, 0xBE,
 	0x56, 0x70, 0xE1,
 	0x00, 0x01, 0xBD,
 	0x56, 0x70, 0x00,
 	0x00, 0x01, 0xBE,
 	0x44, 0xF0, 0x00,
 	0x00, 0x01, 0xBF,
 	0x20, 0x00, 0xD1,
 	0x56, 0x70, 0x00,
 	0x00, 0x01, 0xBF,
 	0x44, 0xF0, 0x00,
 	0x00, 0x01, 0xB7,
 	0x44, 0x70, 0x00,
 	0x00, 0x01, 0xBB,
 	0x44, 0xF0, 0x00,
 	0x00, 0x01, 0xB8,
 	0x44, 0x70, 0x00,
 	0x00, 0x01, 0xBC,
 	0x0B, 0x14, 0xAA,
 	0x00, 0x03, 0x61,
 	0x0B, 0xF0, 0x80,
 	0x00, 0xCA, 0x46,
 	0x0B, 0xF0, 0x80,
 	0x00, 0xC2, 0xC0,
 	0x00, 0x00, 0x04,
 	0x46, 0x90, 0x00,
 	0x57, 0x91, 0x00,
 	0x0C, 0x1E, 0x91,
 	0x21, 0xE5, 0x00,
 	0x44, 0x92, 0x00,
 	0x57, 0xF4, 0x00,
 	0x00, 0xF0, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x01, 0x84,
 	0x44, 0x70, 0x00,
 	0x00, 0x03, 0xFB,
 	0x20, 0x85, 0x00,
 	0x0D, 0x01, 0x07,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0x32,
 	0x0B, 0xE1, 0x80,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xF1, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x01, 0x96,
 	0x20, 0xCE, 0x00,
 	0x0C, 0x1E, 0x90,
 	0x20, 0x00, 0x40,
 	0x21, 0xC4, 0x00,
 	0x44, 0x70, 0x00,
 	0x00, 0x03, 0xFC,
 	0x45, 0xF0, 0x00,
 	0x00, 0x03, 0xFB,
 	0x0D, 0x01, 0x07,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0x32,
 	0x0B, 0xE1, 0x80,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xF2, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x01, 0xA4,
 	0x44, 0x70, 0x00,
 	0x00, 0x03, 0xFD,
 	0x45, 0xF0, 0x00,
 	0x00, 0x03, 0xFB,
 	0x0D, 0x01, 0x07,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0x32,
 	0x0B, 0xE1, 0x80,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xF3, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x01, 0xAC,
 	0x0B, 0xF0, 0x80,
 	0x00, 0x03, 0x52,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xF4, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x01, 0xB8,
 	0x0A, 0xC6, 0x00,
 	0x00, 0x01, 0xB4,
 	0x0D, 0x00, 0xD6,
 	0x60, 0xF4, 0x00,
 	0x00, 0x02, 0xFD,
 	0x44, 0x60, 0x00,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xD0, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x01, 0xCC,
 	0x20, 0xCE, 0x00,
 	0x0C, 0x1E, 0x90,
 	0x61, 0xF0, 0x40,
 	0x00, 0x02, 0x5B,
 	0x21, 0xC4, 0x00,
 	0x44, 0x70, 0x00,
 	0x00, 0x02, 0xD3,
 	0x0B, 0xE1, 0x80,
 	0x45, 0xF0, 0x00,
 	0x00, 0x03, 0xFB,
 	0x0D, 0x01, 0x07,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0x32,
 	0x0B, 0xE1, 0x80,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xD1, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x01, 0xDA,
 	0x61, 0xF0, 0x00,
 	0x00, 0x02, 0x32,
 	0x44, 0x70, 0x00,
 	0x00, 0x02, 0xD4,
 	0x45, 0xF0, 0x00,
 	0x00, 0x03, 0xFB,
 	0x0D, 0x01, 0x07,
 	0x0B, 0xE1, 0x80,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xA1, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x01, 0xED,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x31,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x44, 0x70, 0x00,
 	0x00, 0x00, 0x41,
 	0x60, 0xF4, 0x00,
 	0x00, 0x03, 0x86,
 	0x60, 0x70, 0x00,
 	0x00, 0x00, 0x43,
 	0x47, 0xF4, 0x00,
 	0x0D, 0x52, 0xC9,
 	0x47, 0x0D, 0x00,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xA3, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0x00,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x31,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x44, 0x70, 0x00,
 	0x00, 0x00, 0x41,
 	0x60, 0xF4, 0x00,
 	0x00, 0x02, 0x56,
 	0x60, 0x70, 0x00,
 	0x00, 0x00, 0x43,
 	0x47, 0xF4, 0x00,
 	0x0D, 0x52, 0xC9,
 	0x47, 0x0D, 0x00,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xA4, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0x13,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x31,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x44, 0x70, 0x00,
 	0x00, 0x00, 0x41,
 	0x60, 0xF4, 0x00,
 	0x00, 0x03, 0x91,
 	0x60, 0x70, 0x00,
 	0x00, 0x00, 0x43,
 	0x47, 0xF4, 0x00,
 	0x0D, 0x52, 0xC9,
 	0x47, 0x0D, 0x00,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xEA, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0x32,
 	0x60, 0xF4, 0x00,
 	0x00, 0x02, 0x8B,
 	0x5F, 0xE0, 0x00,
 	0x20, 0x00, 0x4D,
 	0x0D, 0x10, 0x4A,
 	0x00, 0x00, 0x05,
 	0x0A, 0x70, 0x61,
 	0x00, 0x02, 0x8A,
 	0x4C, 0x60, 0x00,
 	0x0A, 0x70, 0x62,
 	0x00, 0x02, 0x8A,
 	0x20, 0x58, 0x00,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x47,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x60, 0x70, 0x00,
 	0x00, 0x00, 0x43,
 	0x60, 0xF4, 0x00,
 	0x00, 0x02, 0x8A,
 	0x60, 0x70, 0x00,
 	0x00, 0x00, 0x45,
 	0x47, 0xF4, 0x00,
 	0x0D, 0x52, 0xC9,
 	0x47, 0x0D, 0x00,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xEB, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0x4A,
 	0x0A, 0x70, 0x62,
 	0x00, 0x02, 0x8D,
 	0x60, 0xF4, 0x00,
 	0x00, 0x02, 0x8E,
 	0x20, 0x58, 0x00,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x47,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x60, 0x70, 0x00,
 	0x00, 0x00, 0x43,
 	0x60, 0xF4, 0x00,
 	0x00, 0x02, 0x8D,
 	0x60, 0x70, 0x00,
 	0x00, 0x00, 0x45,
 	0x47, 0xF4, 0x00,
 	0x0D, 0x52, 0xC9,
 	0x47, 0x0D, 0x00,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xA6, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0x5F,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x19,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x20, 0xCE, 0x00,
 	0x0C, 0x1E, 0x90,
 	0x47, 0xF4, 0x40,
 	0x00, 0x00, 0x01,
 	0x47, 0x70, 0x00,
 	0x00, 0x00, 0x41,
 	0x56, 0x70, 0x00,
 	0x00, 0x00, 0x43,
 	0x47, 0xF4, 0x00,
 	0x0D, 0x52, 0xC9,
 	0x47, 0x0D, 0x00,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xA7, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0x74,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x25,
 	0x20, 0xCE, 0x00,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x0C, 0x1E, 0x90,
 	0x47, 0xF4, 0x40,
 	0x00, 0x00, 0x01,
 	0x47, 0x70, 0x00,
 	0x00, 0x00, 0x41,
 	0x54, 0x70, 0x00,
 	0x00, 0x00, 0x43,
 	0x47, 0xF4, 0x00,
 	0x0D, 0x52, 0xC9,
 	0x47, 0x0D, 0x00,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xA8, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0x89,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x31,
 	0x20, 0xCE, 0x00,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x0C, 0x1E, 0x90,
 	0x47, 0xF4, 0x40,
 	0x00, 0x00, 0x01,
 	0x47, 0x70, 0x00,
 	0x00, 0x00, 0x41,
 	0x56, 0x70, 0x00,
 	0x00, 0x00, 0x43,
 	0x47, 0xF4, 0x00,
 	0x0D, 0x52, 0xC9,
 	0x47, 0x0D, 0x00,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xAB, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0xA0,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x25,
 	0x20, 0xCE, 0x00,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x0C, 0x1E, 0x90,
 	0x46, 0xF4, 0x40,
 	0xFF, 0x00, 0x00,
 	0x47, 0xF4, 0x52,
 	0x00, 0x00, 0x01,
 	0x47, 0x70, 0x00,
 	0x00, 0x00, 0x41,
 	0x54, 0x70, 0x00,
 	0x00, 0x00, 0x43,
 	0x47, 0xF4, 0x00,
 	0x0D, 0x52, 0xC9,
 	0x47, 0x0D, 0x00,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xAD, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0xB7,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x31,
 	0x20, 0xCE, 0x00,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x0C, 0x1E, 0x90,
 	0x46, 0xF4, 0x40,
 	0xFF, 0x00, 0x00,
 	0x47, 0xF4, 0x52,
 	0x00, 0x00, 0x01,
 	0x47, 0x70, 0x00,
 	0x00, 0x00, 0x41,
 	0x54, 0x70, 0x00,
 	0x00, 0x00, 0x43,
 	0x47, 0xF4, 0x00,
 	0x0D, 0x52, 0xC9,
 	0x47, 0x0D, 0x00,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xCF, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0xC5,
 	0x20, 0xCE, 0x00,
 	0x0C, 0x1E, 0x90,
 	0x20, 0x00, 0x42,
 	0x0A, 0xCC, 0x02,
 	0x00, 0x02, 0xC2,
 	0x0A, 0xCC, 0x63,
 	0x54, 0x70, 0x00,
 	0x00, 0x00, 0x47,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xF5, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0xD2,
 	0x56, 0x94, 0x00,
 	0x0C, 0x1E, 0xD4,
 	0x20, 0x00, 0x43,
 	0x0A, 0xCC, 0x00,
 	0x00, 0xC8, 0xAA,
 	0x0B, 0x14, 0x0A,
 	0x0A, 0xF0, 0x80,
 	0x00, 0x03, 0x84,
 	0x57, 0xF4, 0x00,
 	0x00, 0xF7, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0xF3,
 	0x2F, 0x00, 0x00,
 	0x20, 0x00, 0x5D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0xE7,
 	0x56, 0x94, 0x00,
 	0x0C, 0x1E, 0xD6,
 	0x20, 0x00, 0x43,
 	0x0A, 0xCC, 0x00,
 	0x00, 0xC8, 0xAA,
 	0x0B, 0x14, 0x0B,
 	0x5F, 0xF0, 0x00,
 	0x00, 0x03, 0xA2,
 	0x20, 0x00, 0x3E,
 	0x5F, 0x70, 0x00,
 	0x00, 0x03, 0xA2,
 	0x00, 0x00, 0x0C,
 	0x56, 0x94, 0x00,
 	0x0C, 0x1E, 0xD8,
 	0x20, 0x00, 0x43,
 	0x0A, 0xCC, 0x00,
 	0x00, 0xC8, 0xAA,
 	0x0B, 0x14, 0x0C,
 	0x5F, 0xF0, 0x00,
 	0x00, 0x03, 0xA3,
 	0x20, 0x00, 0x3E,
 	0x5F, 0x70, 0x00,
 	0x00, 0x03, 0xA3,
 	0x00, 0x00, 0x0C,
 	0x57, 0xF4, 0x00,
 	0x00, 0xF8, 0x00,
 	0x20, 0x00, 0x6D,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x02, 0xFF,
 	0x56, 0x94, 0x00,
 	0x0C, 0x1E, 0xDA,
 	0x20, 0x00, 0x43,
 	0x0A, 0xCC, 0x00,
 	0x00, 0xC8, 0xAA,
 	0x0B, 0x14, 0x0D,
 	0x00, 0x00, 0x0C,
 	0x0A, 0xF0, 0x80,
 	0x00, 0xC4, 0x7B,
 	0x05, 0xF4, 0x20,
 	0xFF, 0xFF, 0xFF,
 	0x60, 0xF0, 0x00,
 	0x00, 0x00, 0x42,
 	0x56, 0x8F, 0x00,
 	0x47, 0xF4, 0x00,
 	0x00, 0x00, 0x01,
 	0x57, 0xF0, 0x00,
 	0x00, 0x00, 0x40,
 	0x07, 0x58, 0x8C,
 	0x60, 0x70, 0x7C,
 	0x00, 0x00, 0x42,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x03, 0x16,
 	0x61, 0xF4, 0x00,
 	0x00, 0x01, 0x72,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x47, 0xF4, 0x00,
 	0x00, 0x00, 0x00,
 	0x47, 0x0D, 0x00,
 	0x57, 0x70, 0x00,
 	0x00, 0x00, 0x40,
 	0x00, 0x00, 0x0C,
 	0x05, 0xF4, 0x20,
 	0xFF, 0xFF, 0xFF,
 	0x56, 0x8F, 0x00,
 	0x60, 0xF0, 0x00,
 	0x00, 0x00, 0x43,
 	0x47, 0xF4, 0x00,
 	0x00, 0x00, 0x01,
 	0x57, 0xF0, 0x00,
 	0x00, 0x00, 0x41,
 	0x07, 0x58, 0x8C,
 	0x0A, 0xF0, 0x80,
 	0x00, 0x03, 0x39,
 	0x05, 0xF4, 0x20,
 	0xFF, 0xFF, 0xFF,
 	0x47, 0xF4, 0x00,
 	0x00, 0x00, 0x01,
 	0x45, 0x8F, 0x00,
 	0x60, 0xF0, 0x00,
 	0x00, 0x00, 0x43,
 	0x57, 0xF0, 0x00,
 	0x00, 0x00, 0x41,
 	0x45, 0x58, 0x00,
 	0x0A, 0xF0, 0x80,
 	0x00, 0x03, 0x39,
 	0x47, 0xF4, 0x00,
 	0x00, 0x00, 0x01,
 	0x45, 0x8F, 0x00,
 	0x60, 0xF0, 0x00,
 	0x00, 0x00, 0x43,
 	0x57, 0xF0, 0x00,
 	0x00, 0x00, 0x41,
 	0x4D, 0x58, 0x00,
 	0x60, 0x70, 0x7C,
 	0x00, 0x00, 0x43,
 	0x0A, 0xF0, 0xA2,
 	0x00, 0x03, 0x44,
 	0x61, 0xF4, 0x00,
 	0x00, 0x01, 0x72,
 	0x61, 0x70, 0x00,
 	0x00, 0x02, 0x0E,
 	0x47, 0xF4, 0x00,
 	0x00, 0x00, 0x00,
 	0x47, 0x0D, 0x00,
 	0x57, 0x70, 0x00,
 	0x00, 0x00, 0x41,
 	0x00, 0x00, 0x0C,
 	0x47, 0xF4, 0x00,
 	0x00, 0x00, 0x01,
 	0x47, 0x70, 0x00,
 	0x00, 0x00, 0x41,
 	0x61, 0xF4, 0x00,
 	0x00, 0x03, 0x31,
 	0x0B, 0xE1, 0x80,
 	0x60, 0xF0, 0x00,
 	0x00, 0x00, 0x45,
 	0x0A, 0x60, 0x60,
 	0x00, 0x00, 0x0C,
 	0x0A, 0x70, 0x60,
 	0x00, 0x03, 0xB6,
 	0x0A, 0x70, 0x62,
 	0x00, 0x03, 0xB6,
 	0x60, 0xF4, 0x00,
 	0x00, 0x03, 0xB7,
 	0x20, 0x58, 0x00,
 	0x46, 0xF4, 0x00,
 	0x7F, 0xFF, 0xFF,
 	0x0A, 0xC4, 0x00,
 	0x00, 0x03, 0x5F,
 	0x46, 0xF4, 0x00,
 	0x2D, 0x6A, 0x86,
 	0x4E, 0x60, 0x00,
 	0x00, 0x00, 0x0C,
 	0x44, 0xF0, 0x00,
 	0x00, 0x01, 0xBB,
 	0x45, 0xF0, 0x00,
 	0x00, 0x01, 0xBC,
 	0x45, 0x70, 0x00,
 	0x00, 0x01, 0xBB,
 	0x44, 0x70, 0x00,
 	0x00, 0x01, 0xBC,
 	0x44, 0xF0, 0x00,
 	0x00, 0x01, 0xBD,
 	0x45, 0xF0, 0x00,
 	0x00, 0x01, 0xBE,
 	0x45, 0x70, 0x00,
 	0x00, 0x01, 0xBD,
 	0x44, 0x70, 0x00,
 	0x00, 0x01, 0xBE,
 	0x00, 0x00, 0x0C,
 	0x0B, 0xF0, 0x80,
 	0x00, 0xCB, 0x2E,
 	0x0C, 0x94, 0x8B,
 	0x00, 0x00, 0x07,
 	0x5F, 0xF0, 0x00,
 	0x00, 0x03, 0xA2,
 	0x20, 0x00, 0x3E,
 	0x5F, 0x70, 0x00,
 	0x00, 0x03, 0xA2,
 	0x0C, 0x94, 0x8C,
 	0x00, 0x00, 0x07,
 	0x5F, 0xF0, 0x00,
 	0x00, 0x03, 0xA3,
 	0x20, 0x00, 0x3E,
	0x5F, 0x70, 0x00,
 	0x00, 0x03, 0xA3,
 	0x0C, 0x94, 0x8A,
 	0x00, 0x00, 0x0A,
 	0x4E, 0xF0, 0x00,
 	0x00, 0x03, 0xA2,
 	0x4F, 0xF0, 0x00,
 	0x00, 0x03, 0xA3,
 	0x4F, 0x70, 0x00,
 	0x00, 0x03, 0xA2,
 	0x4E, 0x70, 0x00,
 	0x00, 0x03, 0xA3,
 	0x00, 0x00, 0x0C,
 	0x56, 0xF0, 0x00,
 	0x00, 0x01, 0xB9,
 	0x57, 0xF0, 0x22,
 	0x00, 0x01, 0xBA,
 	0x20, 0x00, 0x0A,
 	0x57, 0x70, 0x00,
 	0x00, 0x01, 0xB9,
 	0x57, 0x70, 0x00,
 	0x00, 0x01, 0xBA,
 	0x00, 0x00, 0x0C,
 	0x56, 0xF4, 0x00,
 	0x00, 0x00, 0xDD,
 	0x0B, 0xF0, 0x80,
 	0x00, 0xD6, 0xA2,
 	0x44, 0x70, 0x00,
 	0x00, 0x02, 0xDA,
 	0x0C, 0x00, 0x9C,
 	0x00, 0xAC, 0x00,  // Setup Completed (end initialization state and start audio processing state)
 	0x00, 0xF0, 0x00,  // Disable MaxxVolume to MaxxBass Correlation
 	0x01, 0xF1, 0xD6,  // Correlation Threshold
 	0x00, 0xF2, 0x01,  // Correlation Ratio
 	0x00, 0xF3, 0x00,  // Disable Midnight Mode
 	0x00, 0xD7, 0x30,  // Set SubCrossover : 20.0 Hz
 	0x00, 0xF7, 0x01,  // Phase flip for Left output enabled
 	0x01, 0xF7, 0x00,  // Phase flip for Right output disabled (default state)
 	0x01, 0xF8, 0x01,  // LRsum enabled
 	0x00, 0xF4, 0x01,  // Sub EQ - Active, No Reset
 	0x00, 0xAC, 0x00,  // Setup Completed (end initialization state and start audio processing state)
};

static unsigned char MaxxAudio_Cmd_Standard_Alg[] = {
	0x00, 0xF4, 0x00,  // Sub EQ - Bypass, No Reset
 	0x01, 0xF4, 0x01,  // Sub EQ - Active, Reset
 	0x00, 0xF4, 0x00,  // Sub EQ - Bypass, No Reset
 	0x01, 0xF4, 0x01,  // Sub EQ - Active, Reset
 	0x00, 0xC2, 0x00,  // Set Speaker Type (Also disable Bypass) : 2.0 Mode
 	0x00, 0xC9, 0x78,  // Set Balance  L-CH: 0dB,  R-CH: 0dB.
 	0x00, 0xDF, 0x1E,  // Set Leveler Target : -6.00 dB
 	0x00, 0xDB, 0x78,  // Set Leveler Range : -24.00 dB
 	0x00, 0xDB, 0x78,  // Set Leveler Range : -24.00 dB
 	0x00, 0xD5, 0x6E,  // Set MaxxBass Cutoff Freq : 118.9 Hz
 	0x00, 0xE3, 0x56,  // Set Front High-Pass Freq : 59.9 Hz
	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xE1, 0x70,  // Set MaxxBass Noise Gate Threshold : -100 dB
 	0x00, 0xCB, 0x00,  // Set Original Bass : Disable adding original bass
 	0x00, 0xE2, 0x2F,  // Set MaxxBass Noise Gate Gap : -47 dB
 	0x00, 0xD9, 0x62,  // Set MaxxTreble Freq : 8612.9 Hz
 	0x00, 0xE5, 0x2F,  // Set MaxxTreble Noise Gate Gap : -47 dB
 	0x00, 0xE4, 0x70,  // Set MaxxTreble Noise Gate Threshold : -100 dB
 	0x00, 0xD7, 0x30,  // Set SubCrossover : 20.0 Hz
 	0x01, 0xD0, 0xBA,  // Set MaxxVolume Gain : 8.40 dB
 	0x00, 0xC6, 0x01,  // Set Leveler : OFF
 	0x00, 0xDD, 0x01,  // Set MaxxVolume Type : Hard-Knee
 	0x00, 0xD4, 0x40,  // Set MaxxVolume Dynamic Range : -50 dB
 	0x00, 0xDA, 0x1E,  // Set MaxxVolume Low Gain : 15.00 dB
 	0x00, 0xDC, 0x10,  // Set MaxxVolume Noise Gate : -80 dB
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x00,  // Ch: 1
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x27,  // Freq: 152 Hz
 	0x00, 0x00, 0x51,  // Q: 3.97
 	0x00, 0x00, 0x2A,  // Gain: -6.2
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x01,  // Ch: 2
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x2C,  // Freq: 203 Hz
 	0x00, 0x00, 0x5C,  // Q: 4.46
 	0x00, 0x00, 0x25,  // Gain: -7.6
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x02,  // Ch: 3
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x31,  // Freq: 271 Hz
 	0x00, 0x00, 0x34,  // Q: 2.69
 	0x00, 0x00, 0x18,  // Gain: -11.3
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x03,  // Ch: 4
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x20,  // Freq: 102 Hz
 	0x00, 0x00, 0x46,  // Q: 3.49
 	0x00, 0x00, 0x33,  // Gain: -3.7
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x04,  // Ch: 5
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x39,  // Freq: 431 Hz
 	0x00, 0x00, 0x73,  // Q: 5.47
 	0x00, 0x00, 0x2A,  // Gain: -6.2
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x05,  // Ch: 6
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x3E,  // Freq: 575 Hz
 	0x00, 0x00, 0x51,  // Q: 3.97
 	0x00, 0x00, 0x2D,  // Gain: -5.4
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x06,  // Ch: 7
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x45,  // Freq: 861 Hz
 	0x00, 0x00, 0x64,  // Q: 4.81
 	0x00, 0x00, 0x2E,  // Gain: -5.1
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x07,  // Ch: 8
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x49,  // Freq: 1085 Hz
 	0x00, 0x00, 0x68,  // Q: 4.99
 	0x00, 0x00, 0x2D,  // Gain: -5.4
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x08,  // Ch: 9
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x59,  // Freq: 2734 Hz
 	0x00, 0x00, 0x64,  // Q: 4.81
 	0x00, 0x00, 0x2F,  // Gain: -4.8
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x09,  // Ch: 10
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x63,  // Freq: 4871 Hz
 	0x00, 0x00, 0x56,  // Q: 4.19
 	0x00, 0x00, 0x2C,  // Gain: -5.6
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xCF, 0x01,  // Set Bypass Algorithm. Bypass is enabled for : High Pass Filter,
 	0x00, 0xD1, 0x00,  // Set MaxxBass Intensity : 0.0 %
 	0x00, 0xD1, 0x09,  // Set MaxxBass Intensity : 11.8 %
 	0x00, 0xD1, 0x12,  // Set MaxxBass Intensity : 23.7 %
 	0x00, 0xD1, 0x1B,  // Set MaxxBass Intensity : 35.5 %
 	0x00, 0xD1, 0x24,  // Set MaxxBass Intensity : 47.4 %
 	0x00, 0xD1, 0x2D,  // Set MaxxBass Intensity : 59.2 %
 	0x00, 0xD1, 0x36,  // Set MaxxBass Intensity : 71.1 %
 	0x00, 0xD1, 0x3F,  // Set MaxxBass Intensity : 82.9 %
 	0x00, 0xD1, 0x48,  // Set MaxxBass Intensity : 94.7 %
 	0x00, 0xD1, 0x4C,  // Set MaxxBass Intensity : 100.0 %
 	0x00, 0xD1, 0x1E,  // Set MaxxBass Intensity : 39.5 %
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xD2, 0x2C,  // Set MaxxTreble Intensity : 34.6 %
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xD3, 0x13,  // Set Maxx3D Intensity : 25.0 %
 	0x00, 0xD6, 0x0E,  // Set Maxx3D Mode : SF 44.1KHz/48KHz, Speaker Span Normal, Low-Pass 3 dB
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xE8, 0x43,  // Set MaxxDialog Level : 52.8 %
 	0x00, 0xE9, 0x3B,  // Set MaxxDialog Side Level : 46.5 %
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xF0, 0x00,  // Disable MaxxVolume to MaxxBass Correlation
 	0x01, 0xF1, 0xD6,  // Correlation Threshold
 	0x00, 0xF2, 0x01,  // Correlation Ratio
 	0x00, 0xF3, 0x00,  // Disable Midnight Mode
 	0x00, 0xF4, 0x01,  // Sub EQ - Active, No Reset
 };

static unsigned char MaxxAudio_Cmd_Resounding_Alg[] = {
	0x00, 0xF4, 0x00,  // Sub EQ - Bypass, No Reset
 	0x01, 0xF4, 0x01,  // Sub EQ - Active, Reset
 	0x00, 0xF4, 0x00,  // Sub EQ - Bypass, No Reset
 	0x01, 0xF4, 0x01,  // Sub EQ - Active, Reset
 	0x00, 0xC2, 0x00,  // Set Speaker Type (Also disable Bypass) : 2.0 Mode
 	0x00, 0xC9, 0x78,  // Set Balance  L-CH: 0dB,  R-CH: 0dB.
 	0x00, 0xDF, 0x1E,  // Set Leveler Target : -6.00 dB
 	0x00, 0xDB, 0x78,  // Set Leveler Range : -24.00 dB
 	0x00, 0xDB, 0x78,  // Set Leveler Range : -24.00 dB
 	0x00, 0xD5, 0x6E,  // Set MaxxBass Cutoff Freq : 118.9 Hz
 	0x00, 0xE3, 0x56,  // Set Front High-Pass Freq : 59.9 Hz
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xE1, 0x70,  // Set MaxxBass Noise Gate Threshold : -100 dB
 	0x00, 0xCB, 0x00,  // Set Original Bass : Disable adding original bass
 	0x00, 0xE2, 0x2F,  // Set MaxxBass Noise Gate Gap : -47 dB
 	0x00, 0xD9, 0x5B,  // Set MaxxTreble Freq : 7036.2 Hz
 	0x00, 0xE5, 0x2F,  // Set MaxxTreble Noise Gate Gap : -47 dB
 	0x00, 0xE4, 0x70,  // Set MaxxTreble Noise Gate Threshold : -100 dB
 	0x00, 0xD7, 0x30,  // Set SubCrossover : 20.0 Hz
 	0x01, 0xD0, 0xBA,  // Set MaxxVolume Gain : 8.40 dB
 	0x00, 0xC6, 0x01,  // Set Leveler : OFF
 	0x00, 0xDD, 0x01,  // Set MaxxVolume Type : Hard-Knee
 	0x00, 0xD4, 0x4A,  // Set MaxxVolume Dynamic Range : -45 dB
 	0x00, 0xDA, 0x30,  // Set MaxxVolume Low Gain : 24.00 dB
 	0x00, 0xDC, 0x10,  // Set MaxxVolume Noise Gate : -80 dB
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x00,  // Ch: 1
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x27,  // Freq: 152 Hz
 	0x00, 0x00, 0x51,  // Q: 3.97
 	0x00, 0x00, 0x2A,  // Gain: -6.2
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x01,  // Ch: 2
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x2C,  // Freq: 203 Hz
 	0x00, 0x00, 0x5C,  // Q: 4.46
 	0x00, 0x00, 0x25,  // Gain: -7.6
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x02,  // Ch: 3
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x31,  // Freq: 271 Hz
 	0x00, 0x00, 0x34,  // Q: 2.69
 	0x00, 0x00, 0x18,  // Gain: -11.3
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x03,  // Ch: 4
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x20,  // Freq: 102 Hz
 	0x00, 0x00, 0x51,  // Q: 3.97
 	0x00, 0x00, 0x31,  // Gain: -4.2
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x04,  // Ch: 5
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x39,  // Freq: 431 Hz
 	0x00, 0x00, 0x73,  // Q: 5.47
 	0x00, 0x00, 0x2A,  // Gain: -6.2
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x05,  // Ch: 6
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x3E,  // Freq: 575 Hz
 	0x00, 0x00, 0x51,  // Q: 3.97
 	0x00, 0x00, 0x2D,  // Gain: -5.4
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x06,  // Ch: 7
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x45,  // Freq: 861 Hz
 	0x00, 0x00, 0x64,  // Q: 4.81
 	0x00, 0x00, 0x2E,  // Gain: -5.1
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x07,  // Ch: 8
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x49,  // Freq: 1085 Hz
 	0x00, 0x00, 0x68,  // Q: 4.99
 	0x00, 0x00, 0x2D,  // Gain: -5.4
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x08,  // Ch: 9
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x5C,  // Freq: 3251 Hz
 	0x00, 0x00, 0x29,  // Q: 2.21
 	0x00, 0x00, 0x30,  // Gain: -4.5
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x09,  // Ch: 10
 	0x00, 0x00, 0x02,  // Type: High Shelf
 	0x00, 0x00, 0x6E,  // Freq: 9195 Hz
 	0x00, 0x00, 0x17,  // Q: 1.41
 	0x00, 0x00, 0x49,  // Gain: 2.5
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xCF, 0x01,  // Set Bypass Algorithm. Bypass is enabled for : High Pass Filter,
 	0x00, 0xD1, 0x00,  // Set MaxxBass Intensity : 0.0 %
 	0x00, 0xD1, 0x09,  // Set MaxxBass Intensity : 11.8 %
 	0x00, 0xD1, 0x12,  // Set MaxxBass Intensity : 23.7 %
 	0x00, 0xD1, 0x1B,  // Set MaxxBass Intensity : 35.5 %
 	0x00, 0xD1, 0x24,  // Set MaxxBass Intensity : 47.4 %
 	0x00, 0xD1, 0x2D,  // Set MaxxBass Intensity : 59.2 %
 	0x00, 0xD1, 0x36,  // Set MaxxBass Intensity : 71.1 %
 	0x00, 0xD1, 0x3F,  // Set MaxxBass Intensity : 82.9 %
 	0x00, 0xD1, 0x48,  // Set MaxxBass Intensity : 94.7 %
 	0x00, 0xD1, 0x4C,  // Set MaxxBass Intensity : 100.0 %
 	0x00, 0xD1, 0x1E,  // Set MaxxBass Intensity : 39.5 %
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xD2, 0x32,  // Set MaxxTreble Intensity : 39.4 %
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xD3, 0x1E,  // Set Maxx3D Intensity : 39.5 %
 	0x00, 0xD6, 0x11,  // Set Maxx3D Mode : SF 44.1KHz/48KHz, Speaker Span Normal, Low-Pass 6 dB
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xE8, 0x43,  // Set MaxxDialog Level : 52.8 %
 	0x00, 0xE9, 0x47,  // Set MaxxDialog Side Level : 55.9 %
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xF0, 0x00,  // Disable MaxxVolume to MaxxBass Correlation
 	0x01, 0xF1, 0xD6,  // Correlation Threshold
 	0x00, 0xF2, 0x01,  // Correlation Ratio
 	0x00, 0xF3, 0x00,  // Disable Midnight Mode
 	0x00, 0xF4, 0x01,  // Sub EQ - Active, No Reset
 };

static unsigned char MaxxAudio_Cmd_Relaxing_Alg[] = {
	0x00, 0xF4, 0x00,  // Sub EQ - Bypass, No Reset
 	0x01, 0xF4, 0x01,  // Sub EQ - Active, Reset
 	0x00, 0xF4, 0x00,  // Sub EQ - Bypass, No Reset
 	0x01, 0xF4, 0x01,  // Sub EQ - Active, Reset
 	0x00, 0xC2, 0x00,  // Set Speaker Type (Also disable Bypass) : 2.0 Mode
 	0x00, 0xC9, 0x78,  // Set Balance  L-CH: 0dB,  R-CH: 0dB.
 	0x00, 0xDF, 0x1E,  // Set Leveler Target : -6.00 dB
 	0x00, 0xDB, 0x78,  // Set Leveler Range : -24.00 dB
 	0x00, 0xDB, 0x78,  // Set Leveler Range : -24.00 dB
 	0x00, 0xD5, 0x6E,  // Set MaxxBass Cutoff Freq : 118.9 Hz
 	0x00, 0xE3, 0x4C,  // Set Front High-Pass Freq : 44.9 Hz
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xE1, 0x70,  // Set MaxxBass Noise Gate Threshold : -100 dB
 	0x00, 0xCB, 0x00,  // Set Original Bass : Disable adding original bass
 	0x00, 0xE2, 0x2F,  // Set MaxxBass Noise Gate Gap : -47 dB
 	0x00, 0xD9, 0x67,  // Set MaxxTreble Freq : 9951.0 Hz
 	0x00, 0xE5, 0x2F,  // Set MaxxTreble Noise Gate Gap : -47 dB
 	0x00, 0xE4, 0x70,  // Set MaxxTreble Noise Gate Threshold : -100 dB
 	0x00, 0xD7, 0x30,  // Set SubCrossover : 20.0 Hz
 	0x01, 0xD0, 0xBA,  // Set MaxxVolume Gain : 8.40 dB
 	0x00, 0xC6, 0x01,  // Set Leveler : OFF
 	0x00, 0xDD, 0x00,  // Set MaxxVolume Type : Soft-Knee
 	0x00, 0xD4, 0x40,  // Set MaxxVolume Dynamic Range : -50 dB
 	0x00, 0xDA, 0x18,  // Set MaxxVolume Low Gain : 12.00 dB
 	0x00, 0xDC, 0x10,  // Set MaxxVolume Noise Gate : -80 dB
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x00,  // Ch: 1
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x27,  // Freq: 152 Hz
 	0x00, 0x00, 0x64,  // Q: 4.81
 	0x00, 0x00, 0x2C,  // Gain: -5.6
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x01,  // Ch: 2
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x2C,  // Freq: 203 Hz
 	0x00, 0x00, 0x68,  // Q: 4.99
 	0x00, 0x00, 0x27,  // Gain: -7.0
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x02,  // Ch: 3
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x31,  // Freq: 271 Hz
 	0x00, 0x00, 0x34,  // Q: 2.69
 	0x00, 0x00, 0x18,  // Gain: -11.3
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x03,  // Ch: 4
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x4F,  // Freq: 1534 Hz
 	0x00, 0x00, 0x68,  // Q: 4.99
 	0x00, 0x00, 0x2A,  // Gain: -6.2
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x04,  // Ch: 5
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x39,  // Freq: 431 Hz
 	0x00, 0x00, 0x78,  // Q: 5.69
 	0x00, 0x00, 0x2A,  // Gain: -6.2
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x05,  // Ch: 6
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x3E,  // Freq: 575 Hz
 	0x00, 0x00, 0x51,  // Q: 3.97
 	0x00, 0x00, 0x2D,  // Gain: -5.4
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x06,  // Ch: 7
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x45,  // Freq: 861 Hz
 	0x00, 0x00, 0x64,  // Q: 4.81
 	0x00, 0x00, 0x2E,  // Gain: -5.1
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x07,  // Ch: 8
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x49,  // Freq: 1085 Hz
 	0x00, 0x00, 0x68,  // Q: 4.99
 	0x00, 0x00, 0x2D,  // Gain: -5.4
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x08,  // Ch: 9
 	0x00, 0x00, 0x00,  // Type: Bell
 	0x00, 0x00, 0x5C,  // Freq: 3251 Hz
 	0x00, 0x00, 0x2F,  // Q: 2.47
 	0x00, 0x00, 0x2E,  // Gain: -5.1
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xA1, 0x05,  // Load PEQ Start
 	0x00, 0x00, 0x09,  // Ch: 10
 	0x00, 0x00, 0x03,  // Type: Low Pass
 	0x00, 0x00, 0x76,  // Freq: 14596 Hz
 	0x00, 0x00, 0x56,  // Q: 4.19
 	0x00, 0x00, 0x40,  // Gain: -0.0
 	0x00, 0xD8, 0x00,  // Load PEQ End
 	0x00, 0xCF, 0x01,  // Set Bypass Algorithm. Bypass is enabled for : High Pass Filter,
 	0x00, 0xD1, 0x00,  // Set MaxxBass Intensity : 0.0 %
 	0x00, 0xD1, 0x09,  // Set MaxxBass Intensity : 11.8 %
 	0x00, 0xD1, 0x12,  // Set MaxxBass Intensity : 23.7 %
 	0x00, 0xD1, 0x1B,  // Set MaxxBass Intensity : 35.5 %
 	0x00, 0xD1, 0x24,  // Set MaxxBass Intensity : 47.4 %
 	0x00, 0xD1, 0x2D,  // Set MaxxBass Intensity : 59.2 %
 	0x00, 0xD1, 0x36,  // Set MaxxBass Intensity : 71.1 %
 	0x00, 0xD1, 0x3F,  // Set MaxxBass Intensity : 82.9 %
 	0x00, 0xD1, 0x48,  // Set MaxxBass Intensity : 94.7 %
 	0x00, 0xD1, 0x4C,  // Set MaxxBass Intensity : 100.0 %
 	0x00, 0xD1, 0x19,  // Set MaxxBass Intensity : 32.9 %
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xD2, 0x32,  // Set MaxxTreble Intensity : 39.4 %
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xD3, 0x29,  // Set Maxx3D Intensity : 53.9 %
 	0x00, 0xD6, 0x0E,  // Set Maxx3D Mode : SF 44.1KHz/48KHz, Speaker Span Normal, Low-Pass 3 dB
 	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
 	0x00, 0xE8, 0x34,  // Set MaxxDialog Level : 40.9 %
 	0x00, 0xE9, 0x4A,  // Set MaxxDialog Side Level : 58.3 %
	0x00, 0xCF, 0x00,  // Set Bypass Algorithm. Bypass is disabled for all algorithms.
	0x00, 0xF0, 0x00,  // Disable MaxxVolume to MaxxBass Correlation
	0x01, 0xF1, 0xD6,  // Correlation Threshold
	0x00, 0xF2, 0x01,  // Correlation Ratio
	0x00, 0xF3, 0x00,  // Disable Midnight Mode
	0x00, 0xF4, 0x01,  // Sub EQ - Active, No Reset
};

static int npcp215x_codec_init(struct npcp215x_priv * npcp215x);
static void npcp215x_codec_reset(struct npcp215x_priv *npcp215x);
static int npcp215x_pwr_en(struct npcp215x_priv *npcp215x, bool enable);
static int npcp215x_pa_mute(struct npcp215x_priv *npcp215x, int mute);

static int i2c_write_bytes(struct i2c_client *client, uint8_t *data, uint16_t len)
{
	struct i2c_msg msg;
	int ret = -1;
	int retry = 3;

	msg.flags = 0;
	msg.addr = client->addr;
	msg.len = len;
	msg.buf = data;
	do {
		ret = i2c_transfer(client->adapter, &msg, 1);
		retry--;
		if(ret < 0) {
			mdelay(30);
			dev_warn(&client->dev, "####retry =%d\n", retry);
		}
	} while((ret < 0) && (retry > 0));

	return ret;
}

static int MaxxDSP_SendCmd(unsigned char *CmdList, int size, struct i2c_client *i2c_client)
{
	int index = 0;
	int ret = 0;
	bool pll_cmd_done = false;
	bool gpio_sel_2 = false;

	for (index = 0; index < (size / 3); index++) {
		ret = i2c_write_bytes(i2c_client, CmdList, 3);
		if (pll_cmd_done) {
			mdelay(5);
			pll_cmd_done = false;
		} else if (gpio_sel_2) {
			mdelay(12);
			gpio_sel_2 = false;
		}

		if(CmdList[0] == 0xFF && CmdList[1] == 0xAB && (CmdList[2] == 0xFB || CmdList[2] == 0xFA)) {
			pll_cmd_done = true;
			mdelay(10);
		} else if (CmdList[0] == 0xFF && CmdList[1] == 0xAB && CmdList[2] == 0xF3) {
			if (CmdList[3] == 0x00 && CmdList[4] == 0x01 && CmdList[5] == 0xC8) {
				gpio_sel_2 = true;
				mdelay(10);
			}
		}
		CmdList += 3;

		if (ret < 0) {
			dev_err(&i2c_client->dev, "### %s,%d,ret =%d,index=%d\n\n", __func__, __LINE__, ret, index);
			return -1;
		}
	}

	return 0;
}

static int i2c_read_bytes(struct i2c_client *client, uint8_t *data, unsigned int len)
{
	struct i2c_msg msgs[2];
	int ret = -1;

	msgs[0].flags = !I2C_M_RD;
	msgs[0].addr = client->addr;
	msgs[0].len = len;
	msgs[0].buf = &data[0];

	msgs[1].flags = I2C_M_RD;
	msgs[1].addr = client->addr;
	msgs[1].len = len;
	msgs[1].buf = &data[len];

	ret = i2c_transfer(client->adapter,msgs, 2);

	return ret;
}

static int MaxxDSP_ReadCmd(unsigned char *CmdList, struct i2c_client *i2c_client, unsigned int len)
{
	int ret;
	ret = i2c_read_bytes(i2c_client, CmdList, len);
	if (ret < 0)
		dev_err(&i2c_client->dev, "%s i2c_read_bytes fail\n", __func__);

	return 0;
}

static int npcp215x_alg_get(struct snd_kcontrol *kcontrol,
				struct snd_ctl_elem_value *ucontrol)
{
	struct snd_soc_component *component = snd_kcontrol_chip(kcontrol);
	struct snd_soc_codec *codec = component->codec;
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);

	ucontrol->value.enumerated.item[0] = npcp215x->alg_index;

	return 0;
}

static int npcp215x_set_alg(struct npcp215x_priv *npcp215x)
{
	int ret = 0;

	switch (npcp215x->alg_index) {
	case 0:
		ret = MaxxDSP_SendCmd(MaxxAudio_Cmd_Standard_Alg, sizeof(MaxxAudio_Cmd_Standard_Alg), npcp215x->i2c);
		break;
	case 1:
		ret = MaxxDSP_SendCmd(MaxxAudio_Cmd_Resounding_Alg, sizeof(MaxxAudio_Cmd_Resounding_Alg), npcp215x->i2c);
		break;
	case 2:
		ret = MaxxDSP_SendCmd(MaxxAudio_Cmd_Relaxing_Alg, sizeof(MaxxAudio_Cmd_Relaxing_Alg), npcp215x->i2c);
		break;
	default:
		dev_warn(npcp215x->dev, "%s Not Support other's Algorithm\n", __func__);
		return -1;
	}

	return ret;
}

static int npcp215x_alg_put(struct snd_kcontrol *kcontrol,
				struct snd_ctl_elem_value *ucontrol)
{
	struct snd_soc_component *component = snd_kcontrol_chip(kcontrol);
	struct snd_soc_codec *codec = component->codec;
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);

	if (npcp215x == NULL) {
		dev_err(npcp215x->dev, "%s npcp215x is NULL\n",__func__);
		return -1;
	}

	if (npcp215x->alg_index == ucontrol->value.enumerated.item[0])
		return 0;

	npcp215x->alg_index = ucontrol->value.enumerated.item[0];
	if (!npcp215x->is_init)
		return 0;

	return npcp215x_set_alg(npcp215x);
}

static int npcp215x_vol_get(struct snd_kcontrol *kcontrol,
				struct snd_ctl_elem_value *ucontrol)
{
	struct snd_soc_component *component = snd_kcontrol_chip(kcontrol);
	struct snd_soc_codec *codec = component->codec;
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);

	ucontrol->value.enumerated.item[0] = npcp215x->vol_index;

	return 0;
}

static int npcp215x_set_vol(struct npcp215x_priv *npcp215x)
{
	const unsigned int npcp215x_reg_val[] = {
		0xBA, 0xB0, 0xA6, 0x9B, 0x90, 0x86, 0x7C, 0x68, 0x54, 0x2C,
	};
	unsigned char MaxxAudio_Cmd_MaxxVolume[] = {
 	 	0x01, 0xD0, 0x90,  // Set MaxxVolume Gain : 0 dB
	};

	MaxxAudio_Cmd_MaxxVolume[2] = npcp215x_reg_val[npcp215x->vol_index];
	return MaxxDSP_SendCmd(MaxxAudio_Cmd_MaxxVolume, sizeof(MaxxAudio_Cmd_MaxxVolume), npcp215x->i2c);
}

static int npcp215x_vol_put(struct snd_kcontrol *kcontrol,
				struct snd_ctl_elem_value *ucontrol)
{
	struct snd_soc_component *component = snd_kcontrol_chip(kcontrol);
	struct snd_soc_codec *codec = component->codec;
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);

	if (npcp215x == NULL) {
		dev_err(npcp215x->dev, "%s npcp215x is NULL\n",__func__);
		return -1;
	}

	npcp215x->vol_index = ucontrol->value.enumerated.item[0];
	if (!npcp215x->is_init)
		return 0;

	return npcp215x_set_vol(npcp215x);
}

static int npcp215x_mute_get(struct snd_kcontrol *kcontrol,
				struct snd_ctl_elem_value *ucontrol)
{
	struct snd_soc_component *component = snd_kcontrol_chip(kcontrol);
	struct snd_soc_codec *codec = component->codec;
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);

	ucontrol->value.enumerated.item[0] = npcp215x->mute_index;

	return 0;
}

static int npcp215x_mute(struct npcp215x_priv *npcp215x, int mute)
{
	unsigned char MaxxAudio_Cmd_Mute[] = {
		0x00, 0xC7, mute,  // Soft-Mute
	};

	return MaxxDSP_SendCmd(MaxxAudio_Cmd_Mute, sizeof(MaxxAudio_Cmd_Mute), npcp215x->i2c);
}

static int npcp215x_mute_put(struct snd_kcontrol *kcontrol,
				struct snd_ctl_elem_value *ucontrol)
{
	struct snd_soc_component *component = snd_kcontrol_chip(kcontrol);
	struct snd_soc_codec *codec = component->codec;
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);

	if (npcp215x == NULL) {
		dev_err(npcp215x->dev, "%s npcp215x is NULL\n",__func__);
		return -1;
	}

	npcp215x->mute_index = ucontrol->value.enumerated.item[0];
	if (!npcp215x->is_init)
		return 0;
	return npcp215x_pa_mute(npcp215x, npcp215x->mute_index);
	//return npcp215x_mute(npcp215x, npcp215x->mute_index);
}

static int npcp215x_playback_get(struct snd_kcontrol *kcontrol,
				struct snd_ctl_elem_value *ucontrol)
{
	struct snd_soc_component *component = snd_kcontrol_chip(kcontrol);
	struct snd_soc_codec *codec = component->codec;
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);

	ucontrol->value.enumerated.item[0] = npcp215x->playback_index;

	return 0;
}

static int npcp215x_playback_put(struct snd_kcontrol *kcontrol,
				struct snd_ctl_elem_value *ucontrol)
{
	struct snd_soc_component *component = snd_kcontrol_chip(kcontrol);
	struct snd_soc_codec *codec = component->codec;
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);

	if (npcp215x == NULL) {
		dev_err(npcp215x->dev, "%s npcp215x is NULL\n",__func__);
		return -1;
	}

	if (npcp215x->playback_index == ucontrol->value.enumerated.item[0])
		return 0;

	npcp215x->playback_index = ucontrol->value.enumerated.item[0];
	if (npcp215x->playback_index == 0x1) {
		npcp215x->need_init = true;
		if (npcp215x->is_init)
			npcp215x_pwr_en(npcp215x, true);
		else
			npcp215x_codec_init(npcp215x);
	} else {
		npcp215x->need_init = false;
		npcp215x_pwr_en(npcp215x, false);
	}

	return 0;
}

#define NPCP215X_ALG(xname, xenum) \
	SOC_ENUM_EXT(xname, xenum, npcp215x_alg_get, npcp215x_alg_put)
#define NPCP215X_VOL(xname, xenum) \
	SOC_ENUM_EXT(xname, xenum, npcp215x_vol_get, npcp215x_vol_put)
#define NPCP215X_MUTE(xname, xenum) \
	SOC_ENUM_EXT(xname, xenum, npcp215x_mute_get, npcp215x_mute_put)
#define NPCP215X_PLAYBACK(xname, xenum) \
	SOC_ENUM_EXT(xname, xenum, npcp215x_playback_get, npcp215x_playback_put)

static const char *npcp215x_alg_text[] = { "Standard", "Resounding", "Relaxing" };
static SOC_ENUM_SINGLE_EXT_DECL(npcp215x_alg_enum, npcp215x_alg_text);

static const char *npcp215x_vol_text[] = {
	"8.40", "6.40", "4.40", "2.20", "0.00", "-2.00",
	"-4.00", "-8.00", "-12.00", "-20.00",
};
static SOC_ENUM_SINGLE_EXT_DECL(npcp215x_vol_sel, npcp215x_vol_text);

static const char *npcp215x_mute_text[] = {
	"off", "on",
};
static SOC_ENUM_SINGLE_EXT_DECL(npcp215x_mute_sel, npcp215x_mute_text);

static const char *npcp215x_playback_text[] = {
	"off", "on",
};
static SOC_ENUM_SINGLE_EXT_DECL(npcp215x_playback_sel, npcp215x_playback_text);

static const struct snd_kcontrol_new npcp215x_snd_controls[] = {
	NPCP215X_ALG("Npcp215x Algorithm Control", npcp215x_alg_enum),
	NPCP215X_VOL("Npcp215x MaxxVolume Control (DB)", npcp215x_vol_sel),
	NPCP215X_MUTE("Npcp215x SoftMute Control (on/off)", npcp215x_mute_sel),
	NPCP215X_PLAYBACK("Npcp215x Playback Control (on/off)", npcp215x_playback_sel),
};

static int npcp215x_get_hp_det_gpio_val(struct npcp215x_priv *npcp215x)
{
	int gpio_val = 0;

	npcp215x->gpio_hp_det = devm_gpiod_get(npcp215x->dev, "hp_det", GPIOD_IN);
	if (IS_ERR(npcp215x->gpio_hp_det)) {
		dev_err(npcp215x->dev, "unable to get gpio_hp_det\n");
		npcp215x->gpio_hp_det = NULL;
		return -1;
	}

	gpio_val = gpiod_get_value(npcp215x->gpio_hp_det);

	devm_gpiod_put(npcp215x->dev, npcp215x->gpio_hp_det);

	return gpio_val;
}

static int npcp215x_pwr_en(struct npcp215x_priv *npcp215x, bool enable)
{
	if (enable)
		gpiod_set_value(npcp215x->gpio_amp_pdn, 1);
	else
		gpiod_set_value(npcp215x->gpio_amp_pdn, 0);

	return 0;
}


static int npcp215x_pa_close(struct npcp215x_priv * npcp215x)
{
	int ret;
	unsigned char MaxxAudio_Cmd_pa [] =
	{
		0xFF, 0xAB, 0xF3,  // Set GPIO Selection 2
		0x00, 0x09, 0xC0,
	};

	pr_info("%s \n", __func__);
	ret = MaxxDSP_SendCmd (MaxxAudio_Cmd_pa, sizeof(MaxxAudio_Cmd_pa), npcp215x->i2c);
	npcp215x->mute_index = 1;

	return ret;
}

static int npcp215x_pa_enable(struct npcp215x_priv * npcp215x)
{
	int ret;
	unsigned char MaxxAudio_Cmd_pa [] =
	{
		0xFF, 0xAB, 0xF3,  // Set GPIO Selection 2
		0x00, 0x01, 0xC8,  // ==>  [GPIO16/nMUTE] -> nMUTE
		0xFF, 0xAB, 0xF3,  // Set GPIO Selection 2
		0x00, 0x09, 0xC8,  // ==>  [GPIO16/nMUTE] -> nMUTE,
	};

	pr_info("%s \n", __func__);
	ret = MaxxDSP_SendCmd (MaxxAudio_Cmd_pa, sizeof(MaxxAudio_Cmd_pa), npcp215x->i2c);
	npcp215x->mute_index = 0;

	return ret;
}

static int npcp215x_pa_mute(struct npcp215x_priv *npcp215x, int mute)
{
	int ret;

	if (mute) {
		ret = npcp215x_pa_close(npcp215x);
	} else {
		ret = npcp215x_pa_enable(npcp215x);
	}
	return ret;
}

static int npcp215x_startup(struct snd_pcm_substream *substream,
				struct snd_soc_dai *dai)
{
	struct snd_soc_codec *codec = dai->codec;
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);
	int ret = 0;

	if (!npcp215x->is_init && npcp215x->need_init) {
		ret = npcp215x_codec_init(npcp215x);
		dev_dbg(npcp215x->dev, "npcp215x_codec_init ret %d\n", ret);
	}
	npcp215x_pa_mute(npcp215x, 0);

	return ret;
}

static void npcp215x_shutdown(struct snd_pcm_substream *substream, struct snd_soc_dai *dai)
{
	struct snd_soc_codec *codec = dai->codec;
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);

	npcp215x_pa_mute(npcp215x, 1);
	return;
}

#define npcp215x_FORMATS (SNDRV_PCM_FMTBIT_S16_LE | SNDRV_PCM_FMTBIT_S20_3LE | \
	SNDRV_PCM_FMTBIT_S24_LE | SNDRV_PCM_FMTBIT_S32_LE)

static const struct snd_soc_dai_ops npcp215x_dai_ops = {
	.startup      = npcp215x_startup,
	.shutdown     = npcp215x_shutdown,
};

/* Also supports 12kHz */
static struct snd_soc_dai_driver npcp215x_dai = {
	.name = "npcp215x-voice",
	.playback = {
		.stream_name = "Playback",
		.channels_min = 1,
		.channels_max = 2,
		.rates = SNDRV_PCM_RATE_8000_96000,
		.formats = npcp215x_FORMATS,
	},
	.capture = {
		.stream_name = "Capture",
		.channels_min = 1,
		.channels_max = 2,
		.rates = SNDRV_PCM_RATE_8000_96000,
		.formats = npcp215x_FORMATS,
	},
	.ops = &npcp215x_dai_ops,
	.symmetric_rates = 1,
};

static int npcp215x_suspend(struct snd_soc_codec *codec)
{
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);

	if (npcp215x->is_init) {
		npcp215x_pa_mute(npcp215x, 1);
	}

	return 0;
}

static int npcp215x_resume(struct snd_soc_codec *codec)
{
	struct npcp215x_priv *npcp215x = snd_soc_codec_get_drvdata(codec);
	int ret = 0;
	int gpio_val = 0;

	npcp215x_pa_mute(npcp215x, 0);

	return ret;
}

int npcp215x_i2c_config(struct npcp215x_priv *npcp215x)
{
	int ret = 0;
	unsigned char MaxxAudio_Cmd_GetVersion[6] = {
		0x00, 0xB8, 0x00, //Get Chip Hardware Version
	};

	ret = MaxxDSP_ReadCmd(MaxxAudio_Cmd_GetVersion, npcp215x->i2c, 3);
	if (MaxxAudio_Cmd_GetVersion[3] != 0x00 || MaxxAudio_Cmd_GetVersion[4] != 0x70 ||
				MaxxAudio_Cmd_GetVersion[5] != 0x00) {
		dev_err(npcp215x->dev, "get npcp215x hardware version error\n");
		return -1;
	}
	mdelay(10);

	ret |= MaxxDSP_SendCmd(MaxxAudio_Cmd_FULL_Init, sizeof(MaxxAudio_Cmd_FULL_Init), npcp215x->i2c);

	return ret;
}

static int npcp215x_dt_parse(struct i2c_client *client)
{
	struct npcp215x_priv *npcp215x = i2c_get_clientdata(client);
	struct device_node *np = client->dev.of_node;
	int ret = 0;
	const char *dev_name = NULL;

	npcp215x->gpio_dsp_rst = devm_gpiod_get(&client->dev, "dsp_rst", GPIOD_OUT_LOW);
	if (IS_ERR(npcp215x->gpio_dsp_rst)) {
		dev_err(&client->dev, "unable to get gpio_dsp_rst\n");
		npcp215x->gpio_dsp_rst = NULL;
		return -1;
	}

	ret = gpiod_direction_output(npcp215x->gpio_dsp_rst, 0);
	if (ret != 0)
		dev_err(&client->dev, "unable to set direction gpio_dsp_rst \n");

	npcp215x->gpio_amp_pdn = devm_gpiod_get(&client->dev, "amp_pdn", GPIOD_OUT_LOW);
	if (IS_ERR(npcp215x->gpio_amp_pdn)) {
		dev_err(&client->dev, "unable to get gpio_amp_pdn\n");
		npcp215x->gpio_amp_pdn = NULL;
		return -1;
	}

	ret = gpiod_direction_output(npcp215x->gpio_amp_pdn, 0);
	if (ret != 0)
		dev_err(&client->dev, "unable to set direction gpio_dsp_rst \n");

	ret = of_property_read_string_index(np, "dev-name", 0, &dev_name);
	if (ret == 0)
		dev_set_name(&client->dev, dev_name);

	if (of_property_read_bool(np, "hp_det-gpio") == true)
		npcp215x->need_hp_det = true;
	else
		npcp215x->need_hp_det = false;

	return 0;
}

static int npcp215x_codec_init(struct npcp215x_priv *npcp215x)
{
	int ret = -1;

	if (!npcp215x)
		return ret;

	npcp215x_pwr_en(npcp215x, true);
	msleep(5);
	if (npcp215x->gpio_dsp_rst) {
		gpiod_set_value(npcp215x->gpio_dsp_rst, 1);
		msleep(5);
		gpiod_set_value(npcp215x->gpio_dsp_rst, 0);
		msleep(5);
		gpiod_set_value(npcp215x->gpio_dsp_rst, 1);
		msleep(5);
	}

	if (gpiod_get_value(npcp215x->gpio_dsp_rst) != 1)
		dev_err(npcp215x->dev, "unable to set dsp_rst to high level\n");

	ret = npcp215x_i2c_config(npcp215x);
	if (ret == 0) {
		npcp215x->is_init = true;
	}

	return ret;
}

static void npcp215x_codec_reset(struct npcp215x_priv *npcp215x)
{
	//npcp215x_pwr_en(npcp215x, false);
	gpiod_set_value(npcp215x->gpio_dsp_rst, 0);
	if (gpiod_get_value(npcp215x->gpio_dsp_rst) != 0)
		dev_warn(npcp215x->dev, "rest npcp215x error\n");

	npcp215x->is_init = false;
}

static struct snd_soc_codec_driver soc_dev_npcp215x = {
	.suspend = npcp215x_suspend,
	.resume  = npcp215x_resume,
	.component_driver = {
		.controls = npcp215x_snd_controls,
		.num_controls = ARRAY_SIZE(npcp215x_snd_controls),
	}
};

static int npcp215x_i2c_probe(struct i2c_client *client,
			    const struct i2c_device_id *id)
{
	struct npcp215x_priv *npcp215x = NULL;
	int ret = 0, gpio_val = 0;

	npcp215x = devm_kzalloc(&client->dev, sizeof(struct npcp215x_priv),
			      GFP_KERNEL);
	if (npcp215x == NULL)
		return -ENOMEM;

	npcp215x->i2c = client;
	npcp215x->dev = &client->dev;
	npcp215x->mute_index  = 0;
	npcp215x->vol_index   = 0;
	npcp215x->alg_index   = 0;
	npcp215x->is_init     = false;
	i2c_set_clientdata(client, npcp215x);

	npcp215x_dt_parse(client);
	if (npcp215x->need_hp_det) {
		gpio_val = npcp215x_get_hp_det_gpio_val(npcp215x);
		if (gpio_val == 1) {
			npcp215x->playback_index = 0;
			npcp215x->need_init = false;
		} else if (gpio_val == 0) {
			npcp215x->playback_index = 1;
			npcp215x->need_init = true;
		}
	} else {
		npcp215x->playback_index = 1;
		npcp215x->need_init = true;
	}

	ret = snd_soc_register_codec(&client->dev,
			&soc_dev_npcp215x, &npcp215x_dai, 1);
	if (ret != 0) {
		dev_err(&client->dev, "Failed to register CODEC: %d\n", ret);
		kfree(npcp215x);
	}

	return ret;
}

static int npcp215x_i2c_remove(struct i2c_client *client)
{
	struct npcp215x_priv *npcp215x = i2c_get_clientdata(client);

	devm_gpiod_put(npcp215x->dev, npcp215x->gpio_dsp_rst);
	devm_gpiod_put(npcp215x->dev, npcp215x->gpio_amp_pdn);
	snd_soc_unregister_codec(&client->dev);

	return 0;
}

static const struct i2c_device_id npcp215x_i2c_id[] = {
	{ "npcp215x", 0 },
	{ }
};
MODULE_DEVICE_TABLE(i2c, npcp215x_i2c_id);

static struct i2c_driver npcp215x_i2c_driver = {
	.driver = {
		.name = "npcp215x",
	},
	.probe =    npcp215x_i2c_probe,
	.remove =   npcp215x_i2c_remove,
	.id_table = npcp215x_i2c_id,
};

module_i2c_driver(npcp215x_i2c_driver);

MODULE_DESCRIPTION("ASoC NPCP215x MaxAudio Driver");
MODULE_LICENSE("GPL v2");
